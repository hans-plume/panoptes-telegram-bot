# WAN Consumption Report Guide

This guide explains how to interpret the WAN Consumption Report generated by the `/wan` command.

---

## Overview

The WAN Consumption Report provides detailed analytics about your network's bandwidth usage over the last 24 hours. Instead of static threshold-based alerts, it focuses on **actual consumption patterns** to help you understand how your network is being used.

---

## Report Sections

### ðŸ”´ Peak Capacity

Shows the maximum bandwidth observed during the 24-hour period.

```
ðŸ”´ *Peak Capacity*: 98.35 Mbps (RX) at 17:00 UTC
  - Transmit Peak: 25.50 Mbps at 17:00 UTC
```

- **RX (Receive/Download)**: Maximum download speed observed
- **TX (Transmit/Upload)**: Maximum upload speed observed
- **Timestamp**: When the peak occurred (in UTC)

**Use case**: Identify if you're hitting your ISP plan limits during peak usage.

---

### ðŸ“ˆ Average Usage

The mean bandwidth across all data points in the 24-hour period.

```
ðŸ“ˆ *Average Usage*
  - RX: 3.42 Mbps
  - TX: 1.28 Mbps
```

**Use case**: Understand your typical bandwidth consumption for baseline comparison.

---

### ðŸ“Š 95th Percentile (Capacity Planning)

The value below which 95% of all measurements fall. This metric is commonly used for capacity planning and ISP billing.

```
ðŸ“Š *95th Percentile (Capacity Planning)*
  - RX: 45.20 Mbps
  - TX: 12.50 Mbps
```

**Use case**: Determine the bandwidth level that covers 95% of your usage patterns. If considering an ISP plan change, the 95th percentile helps you choose an appropriate speed tier.

---

### ðŸ’¾ Total Data Transferred

Cumulative data downloaded and uploaded during the period.

```
ðŸ’¾ *Total Data Transferred*
  - Download: 6,847 MB (6.7 GB)
  - Upload: 2,156 MB (2.1 GB)
```

**Use case**: Track data consumption against data caps or for capacity planning.

---

### â° Peak Activity Windows

Time periods with significantly above-average traffic (50% or more above the 24-hour average).

```
â° *Peak Activity Windows*
  - 17:00 UTC: High activity (avg 14.2 Mbps RX)
  - 12:00 UTC: Moderate activity (avg 8.1 Mbps RX)
```

**Activity levels**:
- **High activity**: More than 2x the average
- **Moderate activity**: 1.5x to 2x the average

**Use case**: Identify when your network experiences the most demand for scheduling maintenance or understanding usage patterns.

---

### ðŸ“Š Data Quality

Percentage of valid (non-null) data points in the dataset.

```
ðŸ“Š *Data Quality*: 97.2% valid data points
```

**Interpretation**:
- **95-100%**: Excellent data quality
- **80-95%**: Good, some gaps may exist
- **Below 80%**: Consider investigating connectivity issues

**Use case**: Low data quality may indicate WAN connection instability or data collection issues.

---

### ðŸ“ Data Points Analyzed

Total number of 15-minute intervals analyzed.

```
ðŸ“ *Data Points Analyzed*: 96
```

A full 24-hour period contains 96 data points (4 per hour Ã— 24 hours).

---

## API Data Structure

The WAN Consumption Report analyzes data from the Plume Cloud WAN Stats API. Each data point in the `fifteenMins` array contains:

| Field | Description |
|-------|-------------|
| `timestamp` | ISO 8601 timestamp for the 15-minute interval |
| `rxMbytes` | Downloaded data in megabytes |
| `txMbytes` | Uploaded data in megabytes |
| `rxMaxMbps` | Peak download bandwidth (Mbps) |
| `txMaxMbps` | Peak upload bandwidth (Mbps) |

`null` values indicate missing or invalid data for that interval.

---

## Common Questions

### How is the 95th percentile calculated?

All bandwidth measurements are sorted in ascending order, and the value at the 95th position (95% from the bottom) is selected. This excludes the top 5% of spikes, giving a more stable metric for capacity planning.

### Why use consumption reporting instead of alerts?

Fixed thresholds (like "alert if > 50 Mbps") don't account for:
- Different ISP plan speeds across locations
- Varying usage patterns throughout the day
- Location-specific needs

Consumption reporting shows **actual usage patterns** so you can make informed decisions based on your specific context.

### How often is data collected?

Data is collected in 15-minute intervals, providing 96 data points for a 24-hour period.

---

## Related Commands

| Command | Description |
|---------|-------------|
| `/status` | Overall network health report |
| `/nodes` | Detailed pod information |
| `/wifi` | WiFi network configuration |

---

**Last Updated**: 2024
